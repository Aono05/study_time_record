<h1>勉強時間記録アプリ</h1>

<h4> メールアドレス： <%= current_user.email %> </h4>
<%= link_to "ログアウト", destroy_user_session_path, method: :delete %>

<%= column_chart @total_study_time_indexed_by_date, xtitle: "日付", ytitle: "勉強時間" %>

<table>
  <thead>
    <tr>
      <th>Start time</th>
      <th>End time</th>
      <th>Duration</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @study_times.each do |study_time| %>
      <tr>
        <td><%= l(study_time.started_at) %></td>
        <td><%= l(study_time.ended_at) %></td>
        <td><%= study_time.duration %></td>
        <td><%= link_to 'Show', study_time %></td>
        <td><%= link_to 'Edit', edit_study_time_path(study_time) %></td>
        <td><%= link_to 'Destroy', study_time, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<h3>勉強時間を記録する</h3>
<%= link_to '勉強時間記録', new_study_time_path %>
<br>

<h2>週間勉強時間ランキング</h2>
<table>
  <thead>
    <tr>
      <th>順位</th>
      <th>User ID</th>
      <th>1週間の合計勉強時間</th>
    </tr>
  </thead>

  <tbody>
    <% @total_study_time_per_user.each.with_index(1) do |user, index| %>
      <tr>
        <td><%= index %></td>
        <td><%= user.id %></td>
        <td><%= user.total_duration %></td>
      </tr>
    <% end %>
  </tbody>
</table>
